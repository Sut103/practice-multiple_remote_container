version: "3"
services:
  flask:
    build:
      context: backend
      dockerfile: Dockerfile
    env_file:
      - base-variables.env
      - flask-variables.env
    volumes:
      - .:/src
    ports:
      - "5000:5000"
    working_dir: /src/backend
    command: python app/server.py

  react:
    image: node:14.15-buster
    env_file:
      - base-variables.env
      - react-variables.env
    volumes:
      - .:/src
    ports:
      - "3000:3000"
    working_dir: /src/frontend/app
    command: yarn start
